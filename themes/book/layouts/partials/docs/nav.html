{{ partial "docs/inject/nav-link-head.html" . }}
{{ partial "docs/nav-header" . }}
<div class="header-nav">
    <nav>
                <div id="logo"><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/' class="logo"><img src="/images/new/starcoin.png" width="225px" /></a></div>
        
                <label for="drop" class="toggle mobile-center">Menu</label>
                <input type="checkbox" id="drop" />
                    <ul class="menu">
                        <li>
                            <label for="drop-1" class="toggle">Discovery +</label>
                            <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/discovery'>{{ i18n "navDiscovery" }}</a>
                            <input type="checkbox" id="drop-1"/>
                            <ul>
                                <li> <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/discovery#whatisstarcoin'>{{ i18n "navDiscoveryWhatIsStarcoin" }}</a></li>
                                <li> <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/discovery#technology'>{{ i18n "navDiscoveryTechnology" }}</a></li>
                                <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/discovery#starcoinmove'>{{ i18n "navDiscoveryStarcoinMove" }}</a></li>
                                <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/discovery#designideas'>{{ i18n "navDiscoveryDesignIdeas" }}</a></li>
                                <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/discovery#team'>{{ i18n "navDiscoveryTeam" }}</a></li>
                                <li> <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/discovery#roadmap'>{{ i18n "navDiscoveryRoadmap" }}</a></li>
                            </ul> 
                        </li>
                        <li>
                            <label for="drop-2" class="toggle">Developers +</label>
                            <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/developers'>{{ i18n "navDevelopers" }}</a>
                            <input type="checkbox" id="drop-2"/>
                            <ul>
                                <li> <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/developers#node'>{{ i18n "navDevelopersNode" }}</a></li>
                                <li> <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/developers#move'>{{ i18n "navDevelopersMove" }}</a></li>
                                <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/developers#dapp'>{{ i18n "navDevelopersDapp" }}</a></li>
                                <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/developers#examples'>{{ i18n "navDevelopersExamples" }}</a></li>
                                <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/developers#glossary'>{{ i18n "navDevelopersGlossary" }}</a></li>
                                <li> <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/developers/others'>{{ i18n "navDevelopersOthers" }}</a></li>
                            </ul> 
                        <li>
                        <li>
                            <label for="drop-3" class="toggle">Individuals +</label>
                            <a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/individual'>{{ i18n "navIndividuals" }}</a>
                            <input type="checkbox" id="drop-3"/>
                            <ul class="anchor-link-wrap">
                                <li><a href="/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/individual#stc">{{ i18n "navIndividualsSTC" }}</a></li>
                                <li><a href="/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/individual#wallets">{{ i18n "navIndividualsWallets" }}</a></li>
                                <li><a href="/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/individual#onekey">{{ i18n "navIndividualsOneKey" }}</a></li>
                                <li><a href="/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/individual#starcoinnodes">{{ i18n "navIndividualsStarcoinNodes" }}</a></li>
                                <li><a href="/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/individual#hardcoreplayers">{{ i18n "navIndividualsHardcorePlayers" }}</a></li>
                                <li><a href="/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/individual#grant">{{ i18n "navIndividualsGrant" }}</a></li>
                                <!-- <li>
                                    <label for="drop-4" class="toggle">Tutorials +</label>
                                    <a href="#">Tutorials</a>         
                                    <input type="checkbox" id="drop-4"/>
                
                                    <ul>
                                        <li><a href="#">HTML/CSS</a></li>
                                        <li><a href="#">jQuery</a></li>
                                        <li><a href="#">Other</a></li>
                                    </ul>
                                </li> -->
                            </ul>
                        </li>
                        <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/community'>{{ i18n "navCommunity" }}</a></li>
                        <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/ecosystem'>{{ i18n "navEcosystem" }}</a></li>
                        <li><a href='/{{ cond (eq .Site.Language.Lang "en") "en" "zh" }}/news'>{{ i18n "navNews" }}</a></li>
                    </ul>
                </nav>
</div>
<!-- 手机端导航 -->
<div class="visible-xs" style="display: none;">
    <link href="/css/mobile-nav.css" rel="stylesheet">
    <div class="header_top m_header_top"></div>
    <div class="m_nav_top_bar m_top scrollTop-nav">
        <div class="container m_container">
            <a href="/">
                <div class="m_logo"><img src="/img/logo.png"></div>
            </a>
            <div class="m_nav m_nav_tap">
                <img src="/img/m_nav_more.png">
            </div>
        </div>
    </div>
    <div class="m_nav_model">
        <div class="m_nav_wrap navClick m_nav_navigation">
            {{ partial "docs/nav-menu" . }}
        </div>
        <div class="m-language">
            <div language="zh" class="item">
                中文
                <div class="line"></div>
            </div>
            <div language="en" class="item">English</div>
        </div>
    </div>
    <div class="clearfix"></div>
</div>

<script>
    $(document).ready(function () {
        const currentUrl = window.location.href

        // Active nav bar item while switch between them
        const list = $("ul.menu > li > a")
        list.each((i) =>{
            if (currentUrl.indexOf(list[i].href) === 0){
                list[i].classList.add('active-nav')
            }
        })

        // Switch i18n languages
        $(".dropdown-content > a").click(function () {
            const newLanguage = $(this).attr("language")
            const oldLanguage = currentUrl.split("/")[3]
            if (oldLanguage !== newLanguage){
                const newUrl = currentUrl.replace(`/${oldLanguage}/`,`/${newLanguage}/`)
                window.location.href = newUrl
            }
        })

        const NAVTIVE = JSON.parse(localStorage.getItem('navActive')) || 0
        $(".navClick .item")[NAVTIVE].classList.add('navActive')
        $(".p-language span, .m-language .item").click(function () {
            let url = window.location.href;
            let choosed = $(this).attr('language');
            let current = "{{ .Lang }}";
            if (current !== choosed) {
                url = url.replace(`/${current}/`, `/${choosed}/`)
                window.location.href = url;

            }
        })
        $(".navClick .item").click(function () {
            let navDom = $(this)[0] || null
            if (navDom) {
                navDom.classList.add('navActive')
                let siblingss = []; //用来存放其他的兄弟节点
                let elseLi = navDom.parentNode.children;
                for (var i = 0, elseLil = elseLi.length; i < elseLil; i++) {
                    if (elseLi[i] !== navDom) {//判断是否是ele节点，是否与触发事件的节点相同
                        siblingss.push(elseLi[i]);
                    } else {
                        localStorage.setItem('navActive', i)
                    }
                }
                siblingss.forEach(item => {
                    item.classList.remove('navActive')
                })
            }
            if ($(this).attr("href")) {
                window.open($(this).attr("href"), "_self")
            }
        })
        $(".more_nav .box .li").click(function () {
            if ($(this).attr("href")) {
                window.open($(this).attr("href"), "_self")
            }

        })
        $(".m_nav_navigation").find(".allSelect").click(function () {
            if ($(this).attr("class").indexOf("m_tab_select") > -1) {
                console.log($(this))
                $(this).removeClass("m_tab_select")

            } else {
                $(this).addClass("m_tab_select")
            }


        })

        $(".m_nav_tap").click(function () {
            if ($(this).find("img").attr("src") == "/img/m_nav_more.png") {
                $(this).find("img").attr("src", "/img/m_nav_close.png")
                $(".m_nav_model").show()
                $(".m_nav_model").animate({ height: "100%" });
                $(".scrollTop-nav").addClass("home-nav");
            } else {
                $(this).find("img").attr("src", "/img/m_nav_more.png")
                $(".scrollTop-nav").removeClass("home-nav");
                $(".m_nav_model").animate({ height: "0%" });
                $(".m_nav_model").hide()
            }
        })
    });

</script>